[TOC]

## 前言
视角控制有多种方式，不同的风格游戏也适用于不同的视角控制，视角控制不仅是直接于游戏流程和战斗相关，并且巧妙的视角控制也可以帮助我们在技术上进行优化，节省资源。
丝滑流畅的视角控制系统，是让玩家有耐心玩下去的关键，相机视角位置的细微偏差，都有可能带来致命的负面体验。
那么常见的视角控制有哪些？
1. 固定视角：在早些时候游戏通常是固定视角，即使是《生化危机》这样射击且注重沉浸感的游戏也都是被迫使用固定视角的，很多时候进行探索时，都是通过像房间摄像头的固定视角进行探索的，个人感觉体验感上最大的不适就是缺失方向感，可能进入了一个新的视角空间，但又因为方向迷失又回到了原来的视角空间，后续像《鬼泣4》这样添加多个固定机位，可以进行切换的方式，感觉并没有带来多大改进。
2. 自由视角：自由视角可以使用鼠标或者遥感自由的控制视角，解决了固定视角带来的问题，但是过多的自由也带来了操作问题，玩家无法同时丝滑的控制人物移动和视角移动，所以出现了TPS游戏的视角控制，即将人物朝向和视角控制绑定，对于纯TPS射击游戏这样没有太大问题，但是如果加入近战的元素，比如《SD敢达》一款机战类型的游戏，因为并没有完善的锁定机制，近距离砍中敌人比远距离射击更加的难，所以act一般并不会使用这样的方式，而是视角和朝向控制分离控制，辅以锁定系统或是跟踪视角来控制相机。
3. 锁定机制：锁定机制在act中比较常见，因为不管是固定视角还是自由视角，act中我们的相机都会处在一个能拍摄到玩家和敌人的合适的位置，想要实现有趣的战斗系统就需要引入锁定机制，可以实现像鬼泣5依赖方向遥感搓招的效果，并且锁定敌人后，我们的视角势必需要自动调整到一个适合我们开始战斗的位置。但锁定机制也不是必须的，也有像《DMC鬼泣》的方式，使用固定视角以及攻击时自动向最近的敌人攻击方式，放弃键位锁定，减低了上手难度，并且通过拉扯可以快速脱离战场核心，并不需要在键位锁定视角和自由视角中来回切换。


可以确定的几点，鬼泣的战斗系统依赖锁定的方向，在依赖方向键搓招时，键位可能会发生改变，并且因为锁定系统的原因，面对多单位混战时体验并不好，原因就是锁定改变时，键位的相对方向的改变，所以锁定机制在带来华丽的连招的同时，在多单位战斗中体验却较差，所以自由视角加锁定的方式不一定是更先进的，像《鬼泣DMC》《忍龙》等其他act也有使用固定视角，两者应该是一个各有优缺点的过程，比如鬼泣正代的锁定带来的是华丽的连招，缺点是多单位体验并不好，鬼泣DMC固定视角是整体流程和多单位的爽快战斗，缺点是操作难度较低且没有太好的办法提高。


那么黑魂使用自由加锁定的原因是什么呢，明明他和鬼泣风格相差甚远。 
简单分析出几个原因： 
1. 游戏难度原因决定黑魂并不会有太多单位同时战斗 
2. 因为失误惩罚较大，玩家必须管制每一个boss 精英怪的前摇动作，来进行弹反，翻滚等操作
3. 因为boss体型原因，想要表现boss压迫力并且观察前摇需要保持仰视角 ，自由视角的话可能需要玩家自己一直保持一个仰视角，这样就没有足够精力集中在战斗上。

## 下面开始正式的魂3锁定系统的反推
首先魂3并没有像鬼泣5那样在特殊场景下视角拉很远的设计，猜测还是和游戏节奏有关，鬼泣战斗节奏偏快，并且不管是敌人还是玩家都有多种快速位移的方式，如果视角过近，加上视角的频繁变化可能带来眩晕感，魂3的玩家和敌人动作速率都相对较慢，所以视角相对较劲并且固定，一般只有相机发生碰撞或者遮挡的情况下才会自适应视角，并且一般都是简单的拉近。所以在设计上还是较为简单明了。


简单看一下游戏内视角设置，能了解下支持哪些功能
【此处有图】
首先分析下视角设置
操作镜头左右角度  鼠标或者遥感的输入绑定，颠倒即按照相反的方式绑定
操纵镜头上下角度  同上
·镜头上下角度重置 设置默认高度 可配置 魂3默认高度基本大致于胸部持平
镜头运镜速度设置  既相机移动速度，为了更好体验，可以设置匀速的自由视角移动速度，和自定义函数控制锁定敌人后的运镜速度
镜头回避： 前面提到过


### 自由视角分析
主要在于缩短弹簧臂还是偏移的决策，最简单的策略就是视角改变带来的必要修改使用缩短策略，人物位置移动带来的修改使用偏移的策略，简单来说就是输入优先级的问题，视角遥杆输入的优先级更高，强制缩短弹簧臂， 以此达到想要的相机角度，人物移动并没有直接控制相机角度，所以自动偏移到合适的位置是比缩短弹簧臂更好的决策。

### 锁定视角的分析
常见的锁定视角实现思路透视通过获取对象引用，以此来通过引用中的位置信息来更新相机视角和人物朝向。

#### 获取引用
获取引用或者说选取敌人，选取哪个敌人是首先要做的。我们假设我们有一个当前场景或者周围一定距离敌人的list列表，而我们要做的就是制定选取策略。

##### 基本的是

